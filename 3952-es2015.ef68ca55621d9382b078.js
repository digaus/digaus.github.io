"use strict";(self.webpackChunkShellyHome=self.webpackChunkShellyHome||[]).push([[3952],{43952:function(t,n,e){e.r(n),e.d(n,{HomePageModule:function(){return y}});var i=e(38583),o=e(92859),r=e(3679),s=e(63423),c=e(64762),a=e(9074),l=e(52580),d=e(42810),u=e(72773),g=e(26215),p=e(37716);function f(t,n){1&t&&p._UZ(0,"ion-progress-bar",7)}function h(t,n){if(1&t){const t=p.EpF();p.ynx(0),p.TgZ(1,"ion-header",1),p.TgZ(2,"ion-toolbar"),p.TgZ(3,"ion-title"),p._uU(4," Wifi "),p.qZA(),p.YNc(5,f,1,0,"ion-progress-bar",2),p.qZA(),p.qZA(),p.TgZ(6,"ion-content",3),p.TgZ(7,"ion-button",4),p.NdJ("click",function(){return p.CHM(t),p.oxw().getIP()}),p._uU(8,"Wifi.getIP"),p.qZA(),p.TgZ(9,"ion-button",4),p.NdJ("click",function(){return p.CHM(t),p.oxw().getSSID()}),p._uU(10,"Wifi.getSSID"),p.qZA(),p.TgZ(11,"ion-button",4),p.NdJ("click",function(){return p.CHM(t),p.oxw().disconnect()}),p._uU(12,"Wifi.disconnect"),p.qZA(),p.TgZ(13,"ion-item"),p.TgZ(14,"ion-label"),p._uU(15," SSID "),p.qZA(),p.TgZ(16,"ion-input",5),p.NdJ("ngModelChange",function(n){return p.CHM(t),p.oxw().ssid=n}),p.qZA(),p.qZA(),p.TgZ(17,"ion-item"),p.TgZ(18,"ion-label"),p._uU(19," Password "),p.qZA(),p.TgZ(20,"ion-input",5),p.NdJ("ngModelChange",function(n){return p.CHM(t),p.oxw().password=n}),p.qZA(),p.qZA(),p.TgZ(21,"ion-button",4),p.NdJ("click",function(){p.CHM(t);const n=p.oxw();return n.connect(n.ssid,n.password)}),p._uU(22,"Wifi.connect"),p.qZA(),p.TgZ(23,"ion-button",4),p.NdJ("click",function(){p.CHM(t);const n=p.oxw();return n.connectPrefix(n.ssid,n.password)}),p._uU(24,"Wifi.connectPrefix"),p.qZA(),p.TgZ(25,"ion-item"),p.TgZ(26,"ion-label"),p._uU(27," Current SSID "),p.qZA(),p._UZ(28,"ion-input",6),p.qZA(),p.TgZ(29,"ion-item"),p.TgZ(30,"ion-label"),p._uU(31," Current IP "),p.qZA(),p._UZ(32,"ion-input",6),p.qZA(),p.TgZ(33,"ion-item"),p.TgZ(34,"ion-label"),p._uU(35," Current FileUrl "),p.qZA(),p._UZ(36,"ion-input",6),p.qZA(),p.TgZ(37,"ion-item"),p.TgZ(38,"ion-label"),p._uU(39," Last Error "),p.qZA(),p._UZ(40,"ion-input",6),p.qZA(),p.TgZ(41,"ion-button",4),p.NdJ("click",function(){return p.CHM(t),p.oxw().start()}),p._uU(42,"FileServer.start"),p.qZA(),p.TgZ(43,"ion-button",4),p.NdJ("click",function(){return p.CHM(t),p.oxw().stop()}),p._uU(44,"FileServer.stop"),p.qZA(),p.qZA(),p.BQk()}if(2&t){const t=n.ngIf,e=p.oxw();p.xp6(1),p.Q6J("translucent",!0),p.xp6(4),p.Q6J("ngIf",t.loading),p.xp6(1),p.Q6J("fullscreen",!0),p.xp6(10),p.Q6J("ngModel",e.ssid),p.xp6(4),p.Q6J("ngModel",e.password),p.xp6(8),p.Q6J("value",t.ssid),p.xp6(4),p.Q6J("value",t.ip),p.xp6(4),p.Q6J("value",t.fileUrl),p.xp6(4),p.Q6J("value",t.error)}}const Z={},x=[{path:"",component:(()=>{class t{constructor(){this.state$=new g.X(Z)}ngOnInit(){this.initFolder()}connectPrefix(t,n){return(0,c.mG)(this,void 0,void 0,function*(){Z.loading=!0,this.state$.next(Z),yield l.k.connectPrefix({ssid:t,password:n}).then(t=>Z.ssid=t.ssid).catch(t=>Z.error=t.toString()),Z.loading=!1,this.state$.next(Z)})}connect(t,n){return(0,c.mG)(this,void 0,void 0,function*(){Z.loading=!0,this.state$.next(Z),yield l.k.connect({ssid:t,password:n}).then(t=>Z.ssid=t.ssid).catch(t=>Z.error=t.toString()),Z.loading=!1,this.state$.next(Z)})}disconnect(){return(0,c.mG)(this,void 0,void 0,function*(){Z.loading=!0,this.state$.next(Z),yield l.k.disconnect().catch(t=>Z.error=t.toString()),Z.loading=!1,this.state$.next(Z)})}getSSID(){return(0,c.mG)(this,void 0,void 0,function*(){Z.loading=!0,this.state$.next(Z),yield l.k.getSSID().then(t=>Z.ssid=t.ssid).catch(t=>Z.error=t.toString()),Z.loading=!1,this.state$.next(Z)})}getIP(){return(0,c.mG)(this,void 0,void 0,function*(){Z.loading=!0,this.state$.next(Z),yield l.k.getIP().then(t=>Z.ip=t.ip).catch(t=>Z.error=t.toString()),Z.loading=!1,this.state$.next(Z)})}start(){return(0,c.mG)(this,void 0,void 0,function*(){Z.loading=!0,this.state$.next(Z);const t=this.directory.uri;yield a.D.start({path:t,port:8080}).then(t=>Z.fileUrl="http://"+t.ip+":8080/test.txt").catch(t=>Z.error=t.toString()),Z.loading=!1,this.state$.next(Z)})}stop(){return(0,c.mG)(this,void 0,void 0,function*(){Z.loading=!0,this.state$.next(Z),yield a.D.stop().catch(t=>Z.error=t.toString()),Z.loading=!1,this.state$.next(Z)})}initFolder(){return(0,c.mG)(this,void 0,void 0,function*(){const t=yield d.A.getInfo();let n=u.tP.Data;("mac"===t.operatingSystem||"windows"===t.operatingSystem)&&(n=u.tP.Documents),yield u.fy.mkdir({path:"files",directory:n,recursive:!1}).catch(t=>(console.error(t),null)),yield u.fy.writeFile({path:"files/test.txt",directory:n,data:"This is a test file",encoding:u.ez.UTF8}),this.directory=yield u.fy.getUri({path:"files",directory:n}).catch(t=>(console.error(t),null))})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=p.Xpm({type:t,selectors:[["app-home"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"translucent"],["type","indeterminate",4,"ngIf"],[3,"fullscreen"],["expand","full","color","light","color","primary",3,"click"],[3,"ngModel","ngModelChange"],["readonly","true",3,"value"],["type","indeterminate"]],template:function(t,n){1&t&&(p.YNc(0,h,45,9,"ng-container",0),p.ALo(1,"async")),2&t&&p.Q6J("ngIf",p.lcZ(1,1,n.state$))},directives:[i.O5,o.Gu,o.sr,o.wd,o.W2,o.YG,o.Ie,o.Q$,o.pK,o.j9,r.JJ,r.On,o.X7],pipes:[i.Ov],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[s.Bz.forChild(x)],s.Bz]}),t})(),y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[i.ez,r.u5,o.Pc,m]]}),t})()}}]);